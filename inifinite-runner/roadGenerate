local ss = game:GetService('ServerStorage')
local groundTemp = ss:WaitForChild('BrickRoad')
local cf = groundTemp:GetPivot()

local length = groundTemp.PrimaryPart.Size.Z
local piecesAhead = 3
local groundPieces = {}
local moveStep = 0.5

local function spawnGroundPieces(pos)
	local model = groundTemp:Clone()
	model:PivotTo(cf + pos)
	model.Parent = workspace
	-- model.GroundPiece.BrickColor = BrickColor.random()
	table.insert(groundPieces, model)
end

local function moveGround()
	while true do 
		for i=#groundPieces, 1, -1 do
			local gp = groundPieces[i]
			gp:PivotTo(gp:GetPivot() + Vector3.new(0,0,moveStep))
			
			if gp:GetPivot().Position.Z > length then
				gp:Destroy()
				table.remove(groundPieces,i)
			end
		end
		if groundPieces[#groundPieces]:GetPivot().Position.Z >= -length * (piecesAhead - 1) then
			local newPos = Vector3.new(0,0,-length)
			spawnGroundPieces(newPos)
		end
		wait()
	end
end
wait(3)
for i=1, piecesAhead, 1 do 
	spawnGroundPieces(Vector3.new(0,0,-i*length))
end
moveGround()